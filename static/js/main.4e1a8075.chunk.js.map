{"version":3,"sources":["components/Context/authContext.js","components/LogIn.js","components/SignUp.js","components/LogOut.js","components/Users.js","components/AuthRoute.js","components/App.js","index.js"],"names":["AuthContext","React","createContext","AuthProvider","Provider","getAuthToken","Consumer","localStorage","getItem","setAuthToken","token","setItem","logout","removeItem","isUserLogged","Longin","state","user","username","password","errorMessage","handleChange","event","credentials","target","name","value","setState","getErrorMessageClass","handleSubmit","preventDefault","axios","post","then","res","data","accessToken","props","history","push","catch","error","response","message","console","log","className","this","role","method","action","onSubmit","type","placeholder","onChange","required","to","Component","SignUp","LogOut","handleLogOut","onClick","Users","handleConfirmDelete","id","window","confirm","handleDelete","config","headers","delete","newUsers","users","filter","_id","alert","get","fetchUsers","map","item","AuthRoute","path","render","component","redirectTo","App","notLoggedRender","exact","LogIn","Logout","userLogged","getToken","ReactDOM","basename","document","getElementById"],"mappings":"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","file":"static/js/main.4e1a8075.chunk.js","sourcesContent":["import React from \"react\";\n\nconst AuthContext = React.createContext();\n\nexport const AuthProvider = AuthContext.Provider;\n\nexport const AuthConsumer = AuthContext.Consumer;\n\nexport const getAuthToken = () => localStorage.getItem('token');\n\nexport const setAuthToken = (token) => localStorage.setItem('token', token);\n\nexport const logout = () => localStorage.removeItem('token');\n\nexport const isUserLogged = () => getAuthToken() !== null;\n","import axios from \"axios\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {  setAuthToken } from \"./Context/authContext\";\n\nclass Longin extends Component {\n    state = {\n        user: {\n            username: '',\n            password: ''\n        },\n        errorMessage: \"\"\n    }\n\n    handleChange = (event) => {\n        const user = this.state.user;\n        const credentials = event.target.name;\n        if (credentials === \"userEmail\") {\n            user.username = event.target.value;\n        } else if (credentials === \"password\") {\n            user.password = event.target.value;\n        }\n\n        const state = this.state\n        state.user = user\n        this.setState(state);\n    }\n\n    getErrorMessageClass = () => {\n        if (this.state.errorMessage) {\n            return \"alert alert-danger visible mt-3 text-center\"\n        } else {\n            return \"alert alert-danger invisible\"\n        }\n\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        axios.post(`http://51.38.51.187:3333/api/v1/auth/login`, this.state.user).then(res => {\n            setAuthToken(res.data.accessToken);\n            this.props.history.push(\"/users\");\n        }).catch(error => {\n            const state = this.state\n            state.errorMessage = error.response.data.message\n            this.setState(state);\n            console.log(error);\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"container\">\n                    <div className={this.getErrorMessageClass()} role=\"alert\">\n                        {this.state.errorMessage}\n                    </div>\n                    <div className=\"row justify-content-center\">\n                        <h1>Sign In</h1>\n                    </div>\n                    <div>\n                        <form method=\"post\" action=\"/login\" onSubmit={this.handleSubmit} >\n                            <label>Email Address </label>\n                            <input type=\"email\" name=\"userEmail\" placeholder=\"johnsmith@gmail.com\" onChange={this.handleChange} required ></input>\n                            <label>Password </label>\n                            <input type=\"password\" name=\"password\" onChange={this.handleChange} required ></input>\n                            <input type=\"submit\" value=\"Sign In!\" ></input>\n                        </form>\n                    </div>\n                    <div className=\"row justify-content-center\">\n                        <p>Please Sign Up!</p>\n                        <ul>\n                            <li><Link to=\"/signup\">Sign up</Link></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default Longin; ","import React, { Component } from \"react\";\nimport axios from 'axios';\n\n\nclass SignUp extends Component {\n    state = {\n        user: {\n            username: '',\n            password: ''\n        },\n        errorMessage: \"\"\n    }\n\n    handleChange = event => {\n\n        const user = this.state.user\n        if (event.target.name === \"username\") {\n            user.username = event.target.value\n        } else if (event.target.name === \"password\") {\n            user.password = event.target.value\n        }\n        const state = this.state\n        state.user = user\n        this.setState(state);\n    }\n\n    getErrorMessageClass = () => {\n        if (this.state.errorMessage) {\n            return \"alert alert-danger visible mt-3 text-center\"\n        } else {\n            return \"alert alert-danger invisible\"\n        }\n    }\n\n    handleSubmit = event => {\n        event.preventDefault();\n        axios.post(`http://51.38.51.187:3333/api/v1/auth/register`,  this.state.user).then(res => {\n                // handle success\n                this.props.history.push(\"/\")\n            }).catch(error => {\n                const state = this.state;\n                state.errorMessage = error.response.data.message\n                this.setState(state);\n                console.log(error);\n            });\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"container\">\n                    <div className={ this.getErrorMessageClass() } role=\"alert\">\n                        {this.state.errorMessage}\n                    </div>\n                    <div className=\"row justify-content-center\">\n                        <h1>Sign Up</h1>\n                    </div>\n                    <div>\n                        <form method=\"post\" action=\"/register\" onSubmit={this.handleSubmit}>\n                            <div>\n                                <label>Email </label>\n                                <input type=\"email\" name=\"username\" onChange={this.handleChange} required ></input>\n                                <label>Password </label>\n                                <input type=\"password\" name=\"password\" onChange={this.handleChange} required ></input>\n                            </div>\n                            <div>\n                                <input type=\"submit\" value=\"Register\"></input>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default SignUp; ","import React, {Component} from \"react\";\nimport { logout } from \"./Context/authContext\";\n\n\nclass LogOut extends Component {\n    \n    handleLogOut = () => {\n        logout();\n        this.props.history.push(\"/\");\n        \n    }\n\n    render() {\n        return(\n            <div className=\"container \">\n                <div>\n                    <div className=\"row justify-content-center \">\n                        <h1>Log Out Page</h1>\n                    </div>\n                    <div className=\"row justify-content-center\">\n                        <button onClick={this.handleLogOut}>Sing out</button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default LogOut;\n","import axios from \"axios\";\nimport React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport Logout from \"./LogOut\";\nimport { isUserLogged, getAuthToken } from \"./Context/authContext\";\n\n// This component will be available only for the users that are loged in\n// This should include a list of all users\nclass Users extends Component {\n\n    state = {\n        \"users\": []\n    }\n\n    async fetchUsers() {\n        const token = getAuthToken();\n        const config = {\n            headers: {\n                \"Authorization\": `Bearer ${token}`\n            }\n        }\n        axios.get('http://51.38.51.187:3333/api/v1/users',\n            config\n        ).then(res => {\n            this.setState({ \"users\": res.data })\n        }).catch(error => {\n            console.log(error)\n        });\n    }\n    componentDidMount() {\n            this.fetchUsers();\n    }\n\n    handleConfirmDelete = (id) => {\n        if (window.confirm(\"Are you should you want to delete this entry?\")) {\n            this.handleDelete(id)\n        }\n    }\n\n    handleDelete = (id) => {\n        const token = getAuthToken();\n        const config = {\n            headers: {\n                \"Authorization\": `Bearer ${token}`\n            }\n        }\n        axios.delete(`http://51.38.51.187:3333/api/v1/users/${id}`,\n            config\n        ).then(res => {\n            const newUsers = this.state.users.filter((user) => user._id != id)\n            this.setState({ \"users\": newUsers });\n            alert(\"This entry has been deleted\");\n            console.log(res);\n        }).catch(error => {\n            console.log(error)\n        });\n    }\n\n    render() {\n        return (\n            <div >\n                <div className=\"linkToLogout\">\n                    <ul>\n                        <li><Link to=\"/logout\">Log out</Link></li>\n                    </ul>\n                </div>\n                <div className=\"container\">\n                    <div className=\"row justify-content-center\">\n                        <h1>List of Users</h1>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-sm\">\n                            <h2>Ids</h2>\n                        </div>\n                        <div className=\"col-sm\">\n                            <h2 className=\"marginLeft\">Emails</h2>\n                        </div>\n                    </div>\n                </div>\n                {this.state.users.map(item => {\n                    return (\n                        <div className=\"row centerContent\" key={item._id}>\n                            <div className=\"col-sm \">\n                                <p>{item._id}</p>\n                            </div>\n                            <div className=\"col-sm \">\n                                <p>{item.username}</p>\n                            </div>\n                            <div className=\"col-sm \">\n                                <button onClick={() => this.handleConfirmDelete(item._id)\n                                }>X</button>\n                            </div>\n                        </div>\n                    )\n                })\n                }\n            </div>\n        );\n    }\n}\n\nexport default Users;","import React, { Component } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { isUserLogged } from \"./Context/authContext\";\n\n\nclass AuthRoute extends Component {\n    render() {\n        return (<Route path={this.props.path} render={\n            (props) => {\n                if (isUserLogged()) {\n                    const Component = this.props.component\n                    return <Component {...props} />\n                } else {\n                    return <Redirect to={this.props.redirectTo} />\n                }\n            }\n        } />)\n    }\n}\n\n\nexport default AuthRoute;\n","import React, { Component } from \"react\";\nimport {\n  Route,\n  Switch\n} from 'react-router-dom';\nimport '../styles/App.scss';\nimport LogIn from \"./LogIn\";\nimport SignUp from \"./SignUp\";\nimport Users from \"./Users\";\nimport Logout from \"./LogOut\"\nimport AuthRoute from \"./AuthRoute\"\nimport { isUserLogged } from \"./Context/authContext\";\nimport { Redirect } from \"react-router-dom\";\n\n\nclass App extends Component {\n  \n  notLoggedRender =(Component, props) =>{\n    if(!isUserLogged()) {\n      return <Component {...props} />\n    } else {\n      return <Redirect to=\"/users\" {...props} />\n    }\n  }\n\n  render() {\n    return (\n      <main className=\"container-fluid\">\n        <Switch>\n          <Route exact path=\"/\" render={(props)=> this.notLoggedRender(LogIn, props) } />\n          <Route path=\"/signup\" render={(props)=> this.notLoggedRender(SignUp, props) } />\n          <AuthRoute path=\"/users\" redirectTo =\"/\" component={Users} />\n          <AuthRoute path=\"/logout\" redirectTo =\"/\" component={Logout} />\n        </Switch>\n      </main>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './components/App';\nimport { BrowserRouter } from 'react-router-dom';\nimport { AuthProvider, getAuthToken, isUserLogged } from \"./components/Context/authContext\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n\nconst userLogged = {\n    getToken: () => getAuthToken(),\n    isUserLogged: () => isUserLogged()\n}\n\nReactDOM.render(\n    <AuthProvider value={ userLogged }>\n        <BrowserRouter basename=\"/techChallengePractice\">\n            <App />\n        </BrowserRouter>\n    </AuthProvider>\n    , document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}